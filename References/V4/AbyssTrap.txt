Abyss Doom Serpent trap

Adjusting the projectile image is easy, but for a correct impact animation and damage the use of the 'generic' spelleffect update is needed. There is obsolete code for effect 62h in that routine. Also, a new spelleffect and image entry is needed. Damage will now follow that of Firebolt traps, which is nearly the same as before.


Setting Abyss Traps to effect 62h:

File Offset 0004D609

:0044E209 6A33                    push 00000033
wordt
:0044E209 6A62                    push 00000062


Full piercing vs characters for spelleffect 33 can now be used for Arrows:

File Offset 00052907

:00453507 837D1433                cmp dword ptr [ebp+14], 00000033
wordt
:00453507 837D1400                cmp dword ptr [ebp+14], 00000000


Modifying spelleffect 62h:

000A6E20 6200 0000 4A37 4300 E860 4300 0100 0000 b...J7C..`C.....
000A6E30 0103 3000 FFFF FFFF FFFF FFFF           ..0.........
wordt
000A6E20 6200 0000 2313 4300 E860 4300 0100 0000 b...#.C..`C.....
000A6E30 0000 0E00 6800 0000 6400 0000           ....h...d...


Adjusting speed routine to support new spelleffect number and for lower speed:

File Offset 00087F72

:00488B72 83BE587A690033          cmp dword ptr [esi+00697A58], 00000033
:00488B79 0F85050AF8FF            jne 00409584
:00488B7F 6A0E                    push 0000000E
wordt
:00488B72 83BE587A690062          cmp dword ptr [esi+00697A58], 00000062
:00488B79 0F85050AF8FF            jne 00409584
:00488B7F 6A0B                    push 0000000B


Adjusting 'generic' spellupdate routine, using the original code for spelleffect 62h to spawn the new effect:

File Offset 0003579D

:0043639D 6A6B                    push 0000006B
wordt
:0043639D 6A12                    push 00000012


Adjusting the 'Bone' spelleffect:

000A6560 1200 0000 DF34 4300 9E82 4300 0100 0000 .....4C...C.....
000A6570 0200 0B00 FFFF FFFF FFFF FFFF           ............
wordt
000A6560 1200 0000 B62B 4300 1F84 4300 0100 0000 .....+C...C.....
000A6570 0200 0B00 7500 0000 FFFF FFFF           ....u.......


Using the 'Bone' image data to show 'Doom9':

000AA824 426F 6E65 0000                          Bone..
wordt
000AA824 446F 6F6D 3900                          Doom9.

000A795C 0B03 0000 24BE 4A00 0000 0000 0000 0000 ....$.J.........
000A796C 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A797C 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A798C 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A799C 0000 0000 0000 0000 0000 0000 0202 0200 ................
000A79AC 0000 0000 0000 0000 0000 0000 0808 0800 ................
000A79BC 0000 0000 0000 0000 0000 0000 8000 0000 ................
000A79CC 8000 0000 8000 0000 0000 0000 0000 0000 ................
000A79DC 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A79EC 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A79FC 0000 0000 0000 0000 0000 0000 2000 0000 ............ ...
000A7A0C 2000 0000 2000 0000 0000 0000 0000 0000  ... ...........
000A7A1C 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A7A2C 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A7A3C 0000 0000 0000 0000 0000 0000           ............
wordt
000A795C 0B01 0000 24BE 4A00 0000 0000 0000 0000 ....$.J.........
000A796C 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A797C 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A798C 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A799C 0000 0000 0000 0000 0000 0000 0100 0000 ................
000A79AC 0000 0000 0000 0000 0000 0000 0F00 0000 ................
000A79BC 0000 0000 0000 0000 0000 0000 6000 0000 ............`...
000A79CC 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A79DC 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A79EC 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A79FC 0000 0000 0000 0000 0000 0000 1000 0000 ................
000A7A0C 1000 0000 1000 0000 0000 0000 0000 0000 ................
000A7A1C 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A7A2C 0000 0000 0000 0000 0000 0000 0000 0000 ................
000A7A3C 0000 0000 0000 0000 0000 0000           ............
